<p>I recently finished my <a href="http://dev.thelucasmoore.com/2016/06/05/The-Spotify-API-and-Angular.html">final project</a> for Learn Verified! It was an exciting moment, a culmination of everything I’ve learned in these past four months. My favorite moment came when I realized how to connect my rails database to the front end, which was built with Angular. Below you’ll find the steps with code snippets.</p>

<h2 id="connecting-the-back-end-and-front-end">Connecting the Back End and Front End</h2>

<p>A struggle I first had in building the front end with Angular was that I couldn’t use rails helpers in my views. The front end and back end aren’t automagically connected! To get the information from the database onto the front end, I had to serialize it and use <code>$http.get</code> to grab and render it with Angular.</p>

<p>The most interconnected part of this application is a feature which grabs a user’s data from Spotify and then renders a chart of the artist’s earnings on the front end (<a href="http://dev.thelucasmoore.com/2016/06/05/The-Spotify-API-and-Angular.html">check out the whole project here</a>). Here’s a breakdown of the process, in eleven easy steps:</p>

<h1 id="back-end">Back End</h1>
<ol>
  <li>A user authenticates the Spotify API after clicking ‘Log Into Spotify’. (ok that’s the front end I guess.)</li>
  <li>Oauth handles the <a href="https://developer.spotify.com/web-api/authorization-guide/#authorization_code_flow">Authorization Code Flow</a> and returns a secure key to the backend, also logging a user in.</li>
  <li>The <a href="https://github.com/guilhermesad/rspotify">RSpotify</a> gem (which is amazing, btw) grabs the user’s top artists, which I spliced to be only the top five artists.</li>
  <li>The model extracts the artist and genre data, saving it to the database and associating it with the user.</li>
  <li>Active Model Serialer and simple controllers render the JSON for each RESTful URL.</li>
  <li>A user is redirected to the <code>#/user/:id</code> page.</li>
</ol>

<h1 id="front-end">Front End</h1>
<ol>
  <li>The ui-router for a user has a dynamic URL for each user, which is <code>#/user/:id</code>.</li>
  <li>The UserController grabs the user ID from $stateParams.id, so it can call the right user’s data.</li>
  <li>The BackEndService calls to the user/:id and grabs the JSON data for that user, which is all their top artists.</li>
  <li>The data that get returned are put into an array of names.</li>
  <li>For each artist, I call the Last.fm API to grab the number of total listens.</li>
  <li>This is passed to a Chart.js chart, which renders the data on the front page!</li>
</ol>
